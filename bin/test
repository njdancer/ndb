#!/bin/node
var repl = require('repl');

var Model = require('../lib/Model');

var Post = new Model('/Users/dancer/.ndb/data/Posts');

repl = repl.start();
repl.context.Post = Post;
repl.context.debug = function() {
  post = Post.create();
  post.title = 'test';
  post.save(function() {
    Post.find(post.key, function(data) {
      console.log(data);
      Post.destroy(post.key, function() {
        Post.find(post.key, function(data) {
          console.log(data);
        });
      });
    });
  });
};

repl.context.map = function() {
  Post.map(function(data) {data.title = 'test';}, function(results) { console.log(results); });
};

repl.context.filter = function() {
  Post.filter(function(data) { return data.title == 'test'; }, function(results) { console.log(results); });
};